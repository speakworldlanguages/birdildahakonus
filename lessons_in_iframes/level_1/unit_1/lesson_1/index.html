<!DOCTYPE html>
<html>
  <head>
    <!-- WATER -->
    <title>1-1-1 💧</title>
    <meta charset="utf-8">
    <meta name="robots" content="noindex" />
    <!-- THIS IS DESIGNED TO BE DISPLAYED VIA AN iFrame; therefore meta viewport and icon are not necessary here as long as the parent html has them. -->
    <link rel="stylesheet" href="/css_reusables/css_for_every_single_html.css"> <!-- Basically the global margin:0 padding:0 and box-sizing thing -->
    <link rel="stylesheet" href="/css_reusables/css_for_all_iframed_lesson_htmls.css"> <!-- Disable long-touch on video -->
    <link rel="stylesheet" href="/css_reusables/css_for_photos_and_videos_teach_a_new_word.css"> <!-- MAIN has gradient background -->
    <link rel="stylesheet" href="/css_reusables/css_for_the_glassy_give_up_button.css"> <!-- Using ASIDE as a button with glassmorphism -->
    <link rel="stylesheet" href="/css_reusables/css_for_wavesurfer_microphone_divs.css">
    <link rel="stylesheet" href="/css_reusables/css_for_info_boxes_in_lessons.css">
    <!-- Set paths relative to root so that caches.match() can do its job in service-worker -->
    <!-- Empty line 1 -->
    <!-- Empty line 2 -->
    <script defer src="/js_reusables/js_for_every_single_html.js">/*LET userInterfaceLanguage DEPEND ON DOMAIN NAME, fetch headers, fonts, resetWebp, canVibrate, defaultCursor*/</script>
    <script defer src="/js_reusables/js_for_all_iframed_lesson_htmls.js">/*Handle preloader, detect location, handle nav menu buttons, handle unloading*/</script>
    <script defer src="/js_reusables/js_for_handling_speech_give_up.js">/*White listed browsers: wait for speech ,,, others: don't wait*/</script>
    <script defer src="/third_party_js/wavesurfer.min.js">/*Audio visualization. Github: katspaugh*/</script>
    <script defer src="/third_party_js/wavesurfer.microphone.min.js">/*Audio visualization. Github: katspaugh*/</script>
    <script defer src="/js_reusables/js_for_microphone_input_visualization.js">/*Start, Stop wavesurfer microphone*/</script>
    <script defer src="/js_reusables/js_for_info_boxes_in_lessons.js">/*Includes fetch so it must come after character encoding*/</script>
    <script defer src="/js_reusables/supertimeout.js">/*Pausable timeouts and intervals*/</script>
    <!-- Set paths relative to root so that caches.match() can do its job in service-worker -->
    <script defer src="/lessons_in_iframes/level_1/unit_1/lesson_1/water.js">/*Progress handling for this lesson*/</script>
    <!-- Empty line 1 -->
    <!-- Uncomment to use the console on mobiles | Consider using of parent.console.log instead of console.log -->
    <script src="/third_party_js/eruda.js"></script>
    <script>eruda.init();</script>

    <script> /*CACHE THE NEXT LESSON and make it offline ready*/
      window.addEventListener("load",startDownloadingFilesForTheNextLessonIfNecessary,{once:true});
      function startDownloadingFilesForTheNextLessonIfNecessary() { // Wait for a short while and get the files if device is still online, otherwise wait for internet connectivity.
        setTimeout(afterSomeSeconds,7001); // After being offline, attempt downloading if two consecutive firings of updateOnlineStatus both report ONLINE // See js_for_online_and_offline_modes
        function afterSomeSeconds() { // As of August 2023 parent.internetConnectivityIsNiceAndUsable is updated every 7000ms
          if (parent.internetConnectivityIsNiceAndUsable) { // Start getting the files for the next lesson
            const delayedScript = document.createElement("script"); delayedScript.type = "text/javascript"; delayedScript.src = "/js_for_cache_handling/112.js"; document.body.appendChild(delayedScript);
          } else { // Check & Retry
            let connectivityCheckInterval = setInterval(function () { // Analyse the recursion logic
              if (parent.internetConnectivityIsNiceAndUsable) { clearInterval(connectivityCheckInterval); startDownloadingFilesForTheNextLessonIfNecessary(); }
            }, 2000);
          }
        }
      }
      // ---
      // Check for AVIF support » MAINLY FOR EDGE USERS with version 115 or older
      function isAVIFSupported() { const img = new Image();   return img.decode ? true : false; }
      if (!isAVIFSupported()) { // Display alert if AVIF is not supported
        alert("AVIF?"); // _WARNING_ This didn't fire on an iPad: August 2023, which could mean that it returns a false-positive.
        setTimeout(function () { parent.tellTheUserToChangeOrUpdateTheBrowser(); }, 4000);
      } else {
        parent.console.log("AVIF images may be supported.");
        // HARD TEST TO SEE if avif is indeed supported
        const img = new Image();
        img.onload = function() {
          if (img.naturalWidth > 0 || img.naturalHeight > 0) { parent.console.log("AVIF images are definitely supported."); }
          else { alert("avif?"); setTimeout(function () { parent.tellTheUserToChangeOrUpdateTheBrowser(); }, 4000); }
        };
        img.src = "data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAAIgAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAABAA0AAIAAAAAMYXYxQ4EgAgAAAAAUaXNwZQAAAAAAAAAQAAAAEAAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAACptZGF0EgAKCDgM/9lAQ0AIMhQQAAAAFLm4wN/TRReKCcSo648oag==";
      }
    </script>
  </head>

  <body>
    <!-- MAIN -->
    <main> <!-- BACKGROUND GRADIENT comes from css_for_photos_and_videos_teach_a_new_word | THE SIZE AND POSITION FIXED is in css_for_every_single_html -->
      <!-- Photo pairs -->
      <div id="doublesDivID" class="fullViewportFlexPortraitColumnLandscapeRow"> <!-- See css_for_photos_and_videos_teach_a_new_word.css -->
        <div class="oneOfTheTwoDivsThatContainSquarePictures">
          <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/1a.avif" id="imageA">
          <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/2a.avif" style="display:none; top:-100%;" id="imageC">
          <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/3a.avif" style="display:none; top:-200%;" id="imageE">
        </div>
        <div class="oneOfTheTwoDivsThatContainSquarePictures">
          <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/1b.avif" id="imageB">
          <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/2b.avif" style="display:none; top:-100%;" id="imageD">
          <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/3b.avif" style="display:none; top:-200%;" id="imageF">
        </div>
      </div>
      <!-- End of photo pairs -->
    </main>
    <!-- END OF MAIN -->

    <!-- Videos -->
    <div id="containerOfVideosDivID" style="display:none;">
      <video src="/lessons_in_iframes/level_1/unit_1/lesson_1/v1_vp9.webm" id="video1" playsinline muted style="height: 91vh;"></video>
      <video src="/lessons_in_iframes/level_1/unit_1/lesson_1/v2_vp9.webm" id="video2" playsinline muted style="height: 62vh; display:none;"></video>
      <script>
        window.addEventListener("DOMContentLoaded",function(){
          if (isApple || isFirefox) { // See js_for_all_iframed_lesson_htmls and js_for_different_browsers_and_devices
            const v1 = document.getElementById('video1'); v1.src = "/lessons_in_iframes/level_1/unit_1/lesson_1/v1_h264.mp4";
            const v2 = document.getElementById('video2'); v2.src = "/lessons_in_iframes/level_1/unit_1/lesson_1/v2_h264.mp4";
          }
        },{ once: true });
      </script>
    </div>

    <!-- Background darkening -->
    <div id="fullVpDarkBlueDivID" style="display:none;"> </div>

    <!-- Single photos looping -->
    <div id="singlesDivID" class="" style="display:none;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c1.avif"   class="positionAbsoluteImg">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c2.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/3a.avif"   class="positionAbsoluteImg" style="visibility:hidden;" id="putWaterfall1OrRemove">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c3.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c4.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/3b.avif"   class="positionAbsoluteImg" style="visibility:hidden;" id="putWaterfall2OrRemove">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c5.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c6.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c7.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c8.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c9.avif"   class="positionAbsoluteImg" style="visibility:hidden;">
        <img draggable="false" src="/lessons_in_iframes/level_1/unit_1/lesson_1/c10.avif"  class="positionAbsoluteImg" style="visibility:hidden;">
    </div>
    <!-- SPECIAL CASE FOR HANDLING BIGGER FILES: Load or skip and reorder -->
    <script>
      window.addEventListener('DOMContentLoaded', function(){
        /* waterfall webps are 4,68MB in total,,, and a bit hard on CPU ,,, Use https://downloadtimecalculator.com */
        function getConnectionForWater() {return navigator.connection || navigator.mozConnection || navigator.webkitConnection || navigator.msConnection;}
        var internetForWater = getConnectionForWater();
        if (deviceDetector.isMobile) { console.log("Checking if the internet speed is readable on this mobile device..."); // PHONE & TABLET
          if(internetForWater){ console.log("Internet speed is readable."); // Chrome, Edge, Opera, SamsungInternet » Check how fast the internet is now, thanks to NetworkInformation API
            if(internetForWater.downlink>=1.5){ console.log("Speed is fast enough: "+internetForWater.downlink); /*Fast enough: Let it load and display*/ // Get waterfalls and show
              switchToAnimatedWebpWaterfallsMOBILE();
            } else { preventRepetitionOf3aAnd3b(); console.log("Speed is NOT fast enough: "+internetForWater.downlink); } // Too slow: Loading of waterfalls won't make it in time
          } else { console.warn("Internet speed is NOT readable.");
            if (isApple) { /*Too CPU intensive for Apple*/ } else { /*switchToAnimatedWebpWaterfallsMOBILE();*/ } // Should we let Firefox try???
          } // Firefox, Safari » No information about network speed ,,, NetworkInformation API is not supported » Try to display the waterfalls anyway
        } else { console.log("Checking if the internet speed is readable on this desktop device..."); // DESKTOP
          if(internetForWater){ console.log("Internet speed is readable."); // Chrome, Edge, Opera, SamsungInternet » Check how fast the internet is now, thanks to NetworkInformation API
            if(internetForWater.downlink>=1.5){ console.log("Speed is fast enough: "+internetForWater.downlink); /*Fast enough: Let it load and display*/ // Get waterfalls and show
              switchToAnimatedWebpWaterfallsDESKTOP();
            } else { preventRepetitionOf3aAnd3b(); console.log("Speed is NOT fast enough: "+internetForWater.downlink); } // Too slow: Loading of waterfalls won't make it in time
          } else { console.warn("Internet speed is NOT readable.");
            if (isApple) { /*Too CPU intensive for Apple*/ } else { /*switchToAnimatedWebpWaterfallsDESKTOP(); */ } // Should we let Firefox try???
          } // Firefox, Safari » No information about network speed ,,, NetworkInformation API is not supported » Try to display the waterfalls anyway
        }
      }, { once: true });
      function switchToAnimatedWebpWaterfallsDESKTOP() {
        const turnIntoAWaterfall1 = document.getElementById('imageE'); turnIntoAWaterfall1.src = "/lessons_in_iframes/level_1/unit_1/lesson_1/waterfall1.webp";
        const turnIntoAWaterfall2 = document.getElementById('imageF'); turnIntoAWaterfall2.src = "/lessons_in_iframes/level_1/unit_1/lesson_1/waterfall2.webp";
      }
      function switchToAnimatedWebpWaterfallsMOBILE() {
        const turnIntoAWaterfall1 = document.getElementById('putWaterfall1OrRemove'); turnIntoAWaterfall1.src = "/lessons_in_iframes/level_1/unit_1/lesson_1/waterfall1.webp";
        const turnIntoAWaterfall2 = document.getElementById('putWaterfall2OrRemove'); turnIntoAWaterfall2.src = "/lessons_in_iframes/level_1/unit_1/lesson_1/waterfall2.webp";
      }
      function preventRepetitionOf3aAnd3b() { // No waterfalls
        const becomesUnnecessary1 = document.getElementById('putWaterfall1OrRemove'); becomesUnnecessary1.parentNode.removeChild(becomesUnnecessary1);
        const becomesUnnecessary2 = document.getElementById('putWaterfall2OrRemove'); becomesUnnecessary2.parentNode.removeChild(becomesUnnecessary2);
      }
    </script>

    <!-- “Now it’s your turn” animation 5100ms -->
    <div class="nowYouSayItImgContainer" style="display:none;">
      <img draggable="false" id="nowYouSayItImgID" src="/user_interface/images/now_you_say_it_to_speech_recognition.webp">
    </div>
    <script>
    window.addEventListener("DOMContentLoaded",function(){ // Wait for js_for_all_iframed_lesson_htmls to get isApple from parser in parent
      if (isApple) {
        // Safari animated webp bugfix: Both iOS and MacOS Safari have the bug as of October 2022 Safari16.0
        const nowYouSayItImg = document.getElementById('nowYouSayItImgID'); nowYouSayItImg.src = "/user_interface/images/now_you_say_it_to_speech_recognition.avif";
      }
    },{once:true});
    </script>

    <!-- GIVE UP\PROCEED TO NEXT -->
    <aside class="glassButtonStartHidden"> <!-- See css_for_all_iframed_lesson_htmls.css -->
      <p id="theTextInsideSkipNextButtonID">X</p> <!-- See js_for_handling_speech_give_up.js -->
    </aside>
    <!-- END OF GIVE UP\PROCEED TO NEXT -->

  </body>
</html>
